name: Build MNN 
on: 
  workflow_dispatch: 

jobs: 
  build: 
    runs-on: windows-latest 
    steps: 
      - name: Checkout MNN 
        uses: actions/checkout@v4 
        with: 
          repository: alibaba/MNN 
          path: MNN 
          ref: master 

      - name: Build MNN 
        working-directory: MNN 
        run: | 
          mkdir build && cd build 
          cmake .. -DLLM_SUPPORT_VISION=ON -DMNN_BUILD_OPENCV=ON -DMNN_IMGCODECS=ON -DLLM_SUPPORT_AUDIO=ON -DMNN_BUILD_AUDIO=ON -DBUILD_MLS=true -DMNN_LOW_MEMORY=true -DMNN_CPU_WEIGHT_DEQUANT_GEMM=true -DMNN_BUILD_LLM=true -DMNN_SUPPORT_TRANSFORMER_FUSE=true -DMNN_BUILD_CONVERTER=ON -DMNN_BUILD_TORCH=ON
          cmake --build . --config Release -j
      - name: Upload artifacts 
        uses: actions/upload-artifact@v4 
        with: 
          name: mnn-build 
          path: MNN/build/Release
